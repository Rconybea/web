<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quantity Source Code &mdash; xo unit documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Xquantity Reference" href="xquantity-reference.html" />
    <link rel="prev" title="Quantity Unit Variables" href="quantity-unitvars.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            xo unit documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">xo-unit contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html#representation">Representation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="quantity-reference.html">Quantity Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quantity-class.html">Quantity</a></li>
<li class="toctree-l2"><a class="reference internal" href="quantity-factoryfunctions.html">Quantity Factory Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="quantity-unitvars.html">Quantity Unit Variables</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quantity Source Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xquantity-reference.html">Xquantity Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="scaled-unit-reference.html">Scaled Unit Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="natural-unit-class.html">Natural Unit</a></li>
<li class="toctree-l1"><a class="reference internal" href="bpu-class.html">BPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="bu-store-class.html">Basis Unit Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="basis-unit-reference.html">Basis Unit Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="dimension-enum.html">Native Dimension</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="ubuntu-github-workflow.html">Ubuntu Github Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">Search Page</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xo unit documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="quantity-reference.html">Quantity Reference</a></li>
      <li class="breadcrumb-item active">Quantity Source Code</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quantity-source-code.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quantity-source-code">
<span id="id1"></span><h1>Quantity Source Code<a class="headerlink" href="#quantity-source-code" title="Link to this heading">ÔÉÅ</a></h1>
<p>github: <a class="reference external" href="https://github.com/rconybea/xo-unit/blob/main/include/xo/unit/quantity.hpp">quantity.hpp &#64;github.com</a></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/** @file quantity.hpp</span>
<span class="cm"> *</span>
<span class="cm"> *  Author: Roland Conybeare</span>
<span class="cm"> **/</span>

<span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;quantity_ops.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;natural_unit.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;scaled_unit.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;scaled_unit_concept.hpp&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">xo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/** @class quantity</span>
<span class="cm">         *</span>
<span class="cm">         *  @brief represent a scalar quantity with associated units.</span>
<span class="cm">         *</span>
<span class="cm">         *  - @p NaturalUnit is a non-type template paramoeter</span>
<span class="cm">         *    identifying a unit used for this quantity.</span>
<span class="cm">         *    In *xo-unit* it will be an instance of @c natural_unit</span>
<span class="cm">         *  - @p Repr is a type used to represent a multiple</span>
<span class="cm">         *    of @p NaturalUnit.</span>
<span class="cm">         *</span>
<span class="cm">         *  Enforce dimensional consistency at compile time.</span>
<span class="cm">         *  sizeof(quantity) == sizeof(Repr).</span>
<span class="cm">         *</span>
<span class="cm">         *  A quantity&#39;s runtime state consists of exactly one @p Repr instance:</span>
<span class="cm">         *  @code</span>
<span class="cm">         *  sizeof(quantity&lt;NaturalUnit, Repr&gt;) == sizeof(Repr)</span>
<span class="cm">         *  @endcode</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">ScaledUnit</span><span class="p">,</span>
<span class="w">            </span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">ScaledUnit</span><span class="p">.</span><span class="n">is_natural</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">ScaledUnit</span><span class="p">.</span><span class="n">is_scaled_unit_type</span><span class="p">())</span>
<span class="w">        </span><span class="k">class</span><span class="w"> </span><span class="nc">quantity</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">public</span><span class="o">:</span>
<span class="w">            </span><span class="cm">/** @defgroup quantity-type-traits quantity type traits **/</span>
<span class="w">            </span><span class="c1">///@{</span>
<span class="w">            </span><span class="cm">/** @brief runtime representation for value of this type **/</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Repr</span><span class="p">;</span>
<span class="w">            </span><span class="cm">/** @brief type used to represent unit information */</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">unit_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">ScaledUnit</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** @brief type used for numerator and denominator in basis-unit scalefactor ratios */</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">ratio_int_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unit_type</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="p">;</span>
<span class="w">            </span><span class="cm">/** @brief double-width type used for numerator and denominator of intermediate</span>
<span class="cm">             *         scalefactor ratios.  Used to mitigate loss of precision during computation</span>
<span class="cm">             *         of conversion factors between units with widely-differing magnitude</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">ratio_int2x_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">width2x_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">unit_type</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">            </span><span class="c1">///@}</span>

<span class="w">        </span><span class="k">public</span><span class="o">:</span>
<span class="w">            </span><span class="cm">/** @defgroup quantity-ctors quantity constructors**/</span>
<span class="w">            </span><span class="c1">///@{</span>
<span class="w">            </span><span class="cm">/** @brief create a zero amount with dimension @c ScaledUnit **/</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="n">quantity</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">scale_</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="cm">/** @brief create a quantity representing @p scale @c ScaledUnits **/</span>
<span class="w">            </span><span class="k">explicit</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">quantity</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">scale</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">scale_</span><span class="p">{</span><span class="n">scale</span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-constants static quantity constants **/</span>
<span class="w">            </span><span class="c1">///@{</span>
<span class="w">            </span><span class="cm">/** @brief Use to distinguish @ref quantity from xquantity instances.</span>
<span class="cm">             *</span>
<span class="cm">             *  Useful in c++ template resolution.</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">always_constexpr_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-access-methods quantity access methods **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** @brief value of @c scale_ in quantity representing amount (@c scale_ * @c s_unit) **/</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">repr_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">scale</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">scale_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** @brief s_unit in quantity representing amount (@c scale_ * @c s_unit) **/</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">unit_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">unit</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">s_scaled_unit</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** @brief true iff this quantity represents a dimensionless value **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_dimensionless</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** abbreviated suffix for quantities with this unit **/</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="n">nu_abbrev_type</span><span class="w"> </span><span class="nf">abbrev</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">.</span><span class="n">abbrev</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-arithmetic-support **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** create unit quantity with same unit as @c this **/</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">unit_qty</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create zero quantity with same unit as @c this **/</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">zero_qty</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">reciprocal</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">reciprocal</span><span class="p">(),</span>
<span class="w">                                </span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">scale_</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-unit-conversion **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** create equivalent quantity using scale representation @p Repr2 instead of @c Repr **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">with_repr</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">Repr2</span><span class="o">&gt;</span><span class="p">(</span><span class="n">scale_</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create equivalent quantity expressed as a multiple of @p NaturalUnit2</span>
<span class="cm">             *  instead of @ref s_unit</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">natural_unit</span><span class="o">&lt;</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="w"> </span><span class="n">NaturalUnit2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">rescale</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="cm">/* conversion factor from .unit -&gt; unit2*/</span>
<span class="w">                </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_ratio</span><span class="o">&lt;</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                           </span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">,</span>
<span class="w">                                                             </span><span class="n">NaturalUnit2</span><span class="p">);</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(((</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">                                          </span><span class="o">?</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">                                          </span><span class="o">:</span><span class="w"> </span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">))</span>
<span class="w">                                         </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                         </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="p">);</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">NaturalUnit2</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">NaturalUnit2</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;::</span><span class="n">quiet_NaN</span><span class="p">());</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create equivalent quantity expressed as as multiple of @p ScaledUnit2</span>
<span class="cm">             *  instead of @ref s_unit</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">scaled_unit</span><span class="o">&lt;</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ScaledUnit2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">rescale_ext</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="cm">/* conversion factor from .unit -&gt; unit2*/</span>
<span class="w">                </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_ratio</span><span class="o">&lt;</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                           </span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">,</span>
<span class="w">                                                             </span><span class="n">ScaledUnit2</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">);</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="cm">/* NOTE: test for unit .outer_scale_sq values to get constexpr result with c++23</span>
<span class="cm">                     *       and integer dimension powers.</span>
<span class="cm">                     *</span>
<span class="cm">                     * NOTE: we don&#39;t intend to support mixed-unit quantities.</span>
<span class="cm">                     *       If we change intention, will need to take into account</span>
<span class="cm">                     *       (s_scaled_unit.outer_scale_factor_, s_scaled_unit.outer_scale_sq_)</span>
<span class="cm">                     */</span>
<span class="w">                    </span><span class="n">repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((((</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">                                           </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">ScaledUnit2</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1.0</span><span class="p">))</span>
<span class="w">                                          </span><span class="o">?</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">                                          </span><span class="o">:</span><span class="w"> </span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">ScaledUnit2</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">))</span>
<span class="w">                                       </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                         </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span>
<span class="w">                                         </span><span class="o">/</span><span class="w"> </span><span class="n">ScaledUnit2</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">());</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">ScaledUnit2</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">ScaledUnit2</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;::</span><span class="n">quiet_NaN</span><span class="p">());</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @addtogroup quantity-arithmetic-support **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** create quantity representing this amount multiplied by dimensionless value @p x</span>
<span class="cm">             *</span>
<span class="cm">             *  @pre x must be an arithmetic type such as @c int or @c double</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">scale_by</span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing this quantity divided by dimensionless value @p x</span>
<span class="cm">             *</span>
<span class="cm">             *  @pre x must be an arithmetic type such as @c int or @c double</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">divide_by</span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing dimensionless value @x divided by this quantity</span>
<span class="cm">             *</span>
<span class="cm">             *  @pre x must be an arithmetic type such as @c int or @c double</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">divide_into</span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="p">,</span>
<span class="w">                                </span><span class="n">s_scaled_unit</span><span class="p">.</span><span class="n">reciprocal</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-comparison-support **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** compare two @c quantity instances, under three-way comparison **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">compare</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Quantity2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">quantity</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="n">y2</span><span class="p">.</span><span class="n">scale</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-operators **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** unary negation;  preserves unit information **/</span>
<span class="w">            </span><span class="n">quantity</span><span class="w"> </span><span class="k">operator</span><span class="o">-</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="p">(</span><span class="o">-</span><span class="n">scale_</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** add @p y in-place, converting units if necessary **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">quantity</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">                </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">y2</span><span class="p">.</span><span class="n">scale</span><span class="p">();</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** subtract @p y in-place, converting units if necessary **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">constexpr</span>
<span class="w">            </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">-=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">quantity</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">                </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">y2</span><span class="p">.</span><span class="n">scale</span><span class="p">();</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// operator*=</span>
<span class="w">            </span><span class="c1">// operator/=</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-assignment quantity assignment operators **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** assignment from quantity with identical units **/</span>
<span class="w">            </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">scale_</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** assignment from quantity with compatible units **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">requires</span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                     </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">            </span><span class="n">quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">auto</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">                </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">scale_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x2</span><span class="p">.</span><span class="n">scale</span><span class="p">();</span>

<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-unit-conversion **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** */</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">            </span><span class="k">requires</span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                     </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="n">Q2</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">::</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span><span class="p">().</span><span class="k">template</span><span class="w"> </span><span class="n">with_repr</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** For dimensionless quantities: convert to underlying scale value</span>
<span class="cm">             *</span>
<span class="cm">             *  Not present for dimensioned quantities.</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">constexpr</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="n">Repr</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="w">                </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">ScaledUnit</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">())</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">scale_</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">        </span><span class="k">public</span><span class="o">:</span><span class="w"> </span><span class="cm">/* need public members so that instance can be a non-type template parameter (is a structural type) */</span>
<span class="w">            </span><span class="cm">/** @defgroup quantity-static-vars **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** @brief unit for quantity of this type. Determined at compile-time **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">scaled_unit</span><span class="o">&lt;</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s_scaled_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScaledUnit</span><span class="p">;</span>

<span class="w">            </span><span class="c1">///@}</span>

<span class="w">            </span><span class="cm">/** @defgroup quantity-instance-vars **/</span>
<span class="w">            </span><span class="c1">///@{</span>

<span class="w">            </span><span class="cm">/** quantity represents this multiple of @ref s_scaled_unit</span>
<span class="cm">             *</span>
<span class="cm">             *  Public to avoid disqualifying @c quantity as a &#39;structural type&#39;;</span>
<span class="cm">             *  prerequisite for using a @c quantity instance as a non-type template parameter</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="n">Repr</span><span class="w"> </span><span class="n">scale_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Repr</span><span class="p">{};</span>

<span class="w">            </span><span class="c1">///@}</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="c1">///@{</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         *</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Int2x</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="n">rescale</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="n">scaled_unit</span><span class="o">&lt;</span><span class="n">Int</span><span class="p">,</span><span class="w"> </span><span class="n">Int2x</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">su</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale</span><span class="o">&lt;</span><span class="n">su</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">///@}</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">detail</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">struct</span><span class="w"> </span><span class="nc">quantity_util</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="cm">/* parallel implementation to xquantity&lt;Repr, Int&gt; multiply,</span>
<span class="cm">                 * but return type will have dimension computed at compile-time</span>
<span class="cm">                 */</span>
<span class="w">                </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">                </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">                </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">multiply</span><span class="p">(</span><span class="n">Q1</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">repr_type</span><span class="p">,</span>
<span class="w">                                                           </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                                          </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="p">,</span>
<span class="w">                                                            </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">                    </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_product</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="p">,</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">,</span>
<span class="w">                                                                                     </span><span class="n">y</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">);</span>

<span class="w">                    </span><span class="n">r_repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(((</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">                                            </span><span class="o">?</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">                                            </span><span class="o">:</span><span class="w"> </span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">))</span>
<span class="w">                                           </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                           </span><span class="o">*</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">())</span>
<span class="w">                                           </span><span class="o">*</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">scale</span><span class="p">()));</span>

<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">detail</span><span class="o">::</span><span class="n">su_promote</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">),</span>
<span class="w">                                    </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">                </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                          </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">                </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">divide</span><span class="p">(</span><span class="n">Q1</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">repr_type</span><span class="p">,</span>
<span class="w">                                                           </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                                          </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="p">,</span>
<span class="w">                                                            </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">                    </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_ratio</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="p">,</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">,</span>
<span class="w">                                                                                   </span><span class="n">y</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">);</span>

<span class="w">                    </span><span class="n">r_repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(((</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">                                            </span><span class="o">?</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">                                            </span><span class="o">:</span><span class="w"> </span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">))</span>
<span class="w">                                           </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                           </span><span class="o">*</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">())</span>
<span class="w">                                           </span><span class="o">/</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">scale</span><span class="p">()));</span>

<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">detail</span><span class="o">::</span><span class="n">su_promote</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">),</span>
<span class="w">                                    </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">                </span><span class="k">requires</span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">                </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">Q1</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">repr_type</span><span class="p">,</span>
<span class="w">                                                           </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                                          </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="p">,</span>
<span class="w">                                                            </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="cm">/* conversion to get y in same units as x: multiply by y/x */</span>
<span class="w">                    </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_ratio</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="p">,</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">,</span>
<span class="w">                                                                         </span><span class="n">x</span><span class="p">.</span><span class="n">unit</span><span class="p">().</span><span class="n">natural_unit_</span><span class="p">);</span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">r_repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">())</span>
<span class="w">                                               </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">)</span>
<span class="w">                                                  </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                                  </span><span class="o">*</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">scale</span><span class="p">())));</span>

<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="cm">/* units don&#39;t match! */</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">s_scaled_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;::</span><span class="n">quiet_NaN</span><span class="p">());</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">                </span><span class="k">requires</span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                         </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">                </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">subtract</span><span class="p">(</span><span class="n">Q1</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">repr_type</span><span class="p">,</span>
<span class="w">                                                           </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="p">,</span>
<span class="w">                                                          </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="k">using</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="p">,</span>
<span class="w">                                                            </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">::</span><span class="n">ratio_int2x_type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">                    </span><span class="cm">/* conversion to get y in same units as x: multiply by y/x */</span>
<span class="w">                    </span><span class="k">auto</span><span class="w"> </span><span class="n">rr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">su_ratio</span><span class="o">&lt;</span><span class="n">r_int_type</span><span class="p">,</span><span class="w"> </span><span class="n">r_int2x_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">unit</span><span class="p">(),</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">unit</span><span class="p">());</span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">natural_unit_</span><span class="p">.</span><span class="n">is_dimensionless</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">r_repr_type</span><span class="w"> </span><span class="n">r_scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">())</span>
<span class="w">                                               </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_sq_</span><span class="p">)</span>
<span class="w">                                                  </span><span class="o">*</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">outer_scale_factor_</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">convert_to</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">                                                  </span><span class="o">*</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">scale</span><span class="p">())));</span>

<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">s_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r_scale</span><span class="p">);</span>
<span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="cm">/* units don&#39;t match! */</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">x</span><span class="p">.</span><span class="n">s_unit</span><span class="p">,</span><span class="w"> </span><span class="n">r_repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">r_repr_type</span><span class="o">&gt;::</span><span class="n">quiet_NaN</span><span class="p">());</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">};</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace detail*/</span>

<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">auto</span><span class="w"> </span><span class="n">Unit</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                 </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="n">with_units</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="p">,</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">s_scaled_unit</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="n">with_units_from</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">rescale_ext</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr2</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="n">with_repr</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="k">template</span><span class="w"> </span><span class="n">with_repr</span><span class="o">&lt;</span><span class="n">Repr2</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** @addtogroup quantity-operators **/</span>
<span class="w">        </span><span class="c1">///@{</span>

<span class="w">        </span><span class="cm">/** note: won&#39;t have constexpr result w/ fractional dimension until c++26 (when ::sqrt(), ::pow() are constexpr)</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">quantity_util</span><span class="o">::</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** note: does not require unit scaling,  so constexpr with c++23 **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">scale_by</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** note: does not require unit scaling,  so constexpr with c++23 **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">scale_by</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** divide quantity @p x by quantity @p y.</span>
<span class="cm">         *</span>
<span class="cm">         *  note: won&#39;t have constexpr result w/ fractional dimension until c++26 (when ::sqrt(), ::pow() are constexpr)</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">quantity_util</span><span class="o">::</span><span class="n">divide</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** divide quantity @p x by dimensionless value @p y **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">divide_by</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** divide dimensionless value @p x by quantity @p y **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">divide_into</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** add quantity @p y to quantity @p x.  Result will have the same units as @p x.</span>
<span class="cm">         *  Representation will be the widest of {@c x::repr_type, @c y::repr_type}.</span>
<span class="cm">         *</span>
<span class="cm">         *  note: won&#39;t have constexpr result w/ fractional dimension until c++26 (when ::sqrt(), ::pow() are constexpr)</span>
<span class="cm">         *</span>
<span class="cm">         *  @pre @p x and @p y expected to have consistent dimensions</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">quantity_util</span><span class="o">::</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** subtract an arithmetic value from a dimensionless quantity **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="p">,</span>
<span class="w">                  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Quantity</span><span class="o">::</span><span class="n">is_dimensionless</span><span class="p">()</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">::</span><span class="n">repr_type</span><span class="p">,</span><span class="w"> </span><span class="n">Dimensionless</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">scale</span><span class="p">());</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">yp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">yp</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** subtract a dimensionless quantity from an arithmetic value **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Dimensionless</span><span class="p">,</span>
<span class="w">                  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">is_arithmetic_v</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Quantity</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Quantity</span><span class="o">::</span><span class="n">is_dimensionless</span><span class="p">())</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">Dimensionless</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Quantity</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">using</span><span class="w"> </span><span class="n">repr_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">Dimensionless</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Quantity</span><span class="o">::</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">;</span>

<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">yp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">repr_type</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">scale</span><span class="p">());</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">xp</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">yp</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="cm">/** subtract quantity @p y from quantity @p x.  Result will have the same units as @p x.</span>
<span class="cm">         *  Representation will be the widest of {@c x::repr_type, @c y::repr_type}</span>
<span class="cm">         *</span>
<span class="cm">         *  note: won&#39;t have constexpr result w/ fractional dimension until c++26 (when ::sqrt(), ::pow() are constexpr)</span>
<span class="cm">         *</span>
<span class="cm">         *  @pre @p x and @p y expected to have consistent dimensions</span>
<span class="cm">         **/</span>
<span class="w">        </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Q1</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Q2</span><span class="o">&gt;</span>
<span class="w">        </span><span class="k">requires</span><span class="w"> </span><span class="p">(</span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q1</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">quantity_concept</span><span class="o">&lt;</span><span class="n">Q2</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q1</span><span class="o">::</span><span class="n">always_constexpr_unit</span>
<span class="w">                  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Q2</span><span class="o">::</span><span class="n">always_constexpr_unit</span><span class="p">)</span>
<span class="w">        </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span>
<span class="w">        </span><span class="k">operator</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Q1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">detail</span><span class="o">::</span><span class="n">quantity_util</span><span class="o">::</span><span class="n">subtract</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">///@}</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- mass -----</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x picograms of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picograms</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">picogram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x nanograms of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanograms</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">nanogram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x micrograms of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">micrograms</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">microgram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x milligrams of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">milligrams</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">milligram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x grams of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">grams</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">gram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x kilograms of mass,  with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilograms</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">kilogram</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x tonnes of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">tonnes</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">tonne</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x kilotonnes of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilotonnes</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">kilotonne</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x megatonnes of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">megatonnes</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">megatonne</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x gigatonnes of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">gigatonnes</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">gigatonne</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- mass constants ----</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 picogram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picogram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">picograms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 nanogram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanogram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nanograms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 microgram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">microgram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micrograms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 milligram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">milligram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">milligrams</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 gram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">gram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grams</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 kilogram of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilogram</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kilograms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 metric tonne of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">tonne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tonnes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 metric kilotonne of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilotonne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kilotonnes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 metric megatonne of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">megatonne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">megatonnes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 metric gigatonne of mass, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">gigatonne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gigatonnes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace qty*/</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- distance -----</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x picometers of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picometers</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">picometer</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x nanometers of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanometers</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">nanometer</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x micrometers of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">micrometers</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">micrometer</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x millimeters of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">millimeters</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">millimeter</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x meters of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">meters</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">meter</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x kilometers of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilometers</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">kilometer</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x megameters of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">megameters</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">megameter</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x gigameters of distance,</span>
<span class="cm">             *  with compile-time unit operations</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">gigameters</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">gigameter</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x light-seconds of distance,</span>
<span class="cm">             *  with compile-time unit operations.</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">lightseconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">lightsecond</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x astronomical units of distance,</span>
<span class="cm">             *  with compile-time unit representation</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">astronomicalunits</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">astronomicalunit</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x inches of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">inches</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">inch</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="cm">/** create quantity representing @p x feet of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">feet</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">foot</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="cm">/** create quantity representing @p x yards of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">yards</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">yard</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="cm">/** create quantity representing @p x statute miles of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">miles</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">mile</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- distance constants -----</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 picometer of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picometer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">picometers</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 nanometer of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanometer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nanometers</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 micrometer of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">micrometer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micrometers</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 millimeter of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">millimeter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">millimeters</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 meter of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">meter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meters</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 kilometer of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">kilometer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kilometers</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 megameter of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">megameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">megameters</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing 1 gigameter of distance, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">gigameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gigameters</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing exactly 1 lightsecond of distance,</span>
<span class="cm">             *  with compile-time unit representation</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">lightsecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lightseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">            </span><span class="cm">/** a quantity representing exactly 1 astronomical unit of distance,</span>
<span class="cm">             *  with compile-time unit representation</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">astronomicalunit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">astronomicalunits</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 inch of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">inch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inches</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 foot of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">foot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">feet</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 yard of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">yard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yards</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 mile of distance, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">mile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">miles</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace qty*/</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- time -----</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x picoseconds of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picoseconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">picosecond</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x nanoseconds of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanoseconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">nanosecond</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x microseconds of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">microseconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">microsecond</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x milliseconds of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">milliseconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">millisecond</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x seconds of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">seconds</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">second</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x minutes of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">minutes</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">minute</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x hours of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">hours</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x exactly-24-hour days of time, with compile-time unit operations **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">days</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** creeate quantity representing @p x weeks of time,</span>
<span class="cm">             *  with compile-time unit operations.  Each week has exactly 7 24-hour days.</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">weeks</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">week</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x months of time,</span>
<span class="cm">             *  with compile-time unit operations.  Each month has exactly 30 24-hour days</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">months</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x years of time,</span>
<span class="cm">             *  with compile-time unit operations.  Each year has exactly 365.25 24-hour days</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">years</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x &#39;250-day years&#39; of time.</span>
<span class="cm">             *  250 represents approximate number of business days in a calendar year.</span>
<span class="cm">             **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year250s</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">year250</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x &#39;360-day years&#39; of time **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year360s</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">year360</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x &#39;365-day years&#39; of time **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year365s</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">year365</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- time constants ----</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 picosecond of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">picosecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">picoseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 nanosecond of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">nanosecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nanoseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 microsecond of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">microsecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">microseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 millisecond of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">millisecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 second of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 minute of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">minute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">minutes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 hour of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hours</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 day of time (exactly 24 hours), with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">days</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 week of time (7 24-hour days), with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">week</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weeks</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 month of time (30 24-hour days), with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">months</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 year of time (365.25 24-hour days), with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">years</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 250-day year of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year250</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year250s</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 360-day year of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year360</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year360s</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">            </span><span class="cm">/** a quantity representing 1 365-day year of time, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">year365</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year365s</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace qty*/</span>

<span class="w">        </span><span class="k">namespace</span><span class="w"> </span><span class="nn">qty</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// ----- volatility -----</span>

<span class="w">            </span><span class="cm">/* variance expressed has dimension 1/t;</span>
<span class="cm">             * volatility ~ sqrt(variance),  has dimension 1/sqrt(t)</span>
<span class="cm">             */</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x units of 30-day volatility, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">volatility_30d</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">volatility_30d</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x units of 250-day volatility, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">volatility_250d</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">volatility_250d</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x units of 360-day volatility, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">volatility_360d</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">volatility_360d</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>

<span class="w">            </span><span class="cm">/** create quantity representing @p x units of 365-day volatility, with compile-time unit representation **/</span>
<span class="w">            </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Repr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">volatility_365d</span><span class="p">(</span><span class="n">Repr</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">quantity</span><span class="o">&lt;</span><span class="n">u</span><span class="o">::</span><span class="n">volatility_365d</span><span class="p">,</span><span class="w"> </span><span class="n">Repr</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace qty*/</span>

<span class="w">        </span><span class="cm">/* reminder: see [quantity_ops.hpp] for operator* etc */</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="cm">/*namespace qty*/</span>
<span class="p">}</span><span class="w"> </span><span class="cm">/*namespace xo*/</span>

<span class="cm">/** end quantity.hpp **/</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quantity-unitvars.html" class="btn btn-neutral float-left" title="Quantity Unit Variables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="xquantity-reference.html" class="btn btn-neutral float-right" title="Xquantity Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1980, Roland Conybeare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>